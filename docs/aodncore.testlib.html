
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>aodncore.testlib package &#8212; aodncore 0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="aodncore-testlib-package">
<h1>aodncore.testlib package<a class="headerlink" href="#aodncore-testlib-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-aodncore.testlib.basetest">
<span id="aodncore-testlib-basetest-module"></span><h2>aodncore.testlib.basetest module<a class="headerlink" href="#module-aodncore.testlib.basetest" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="aodncore.testlib.basetest.BaseTestCase">
<em class="property">class </em><code class="descclassname">aodncore.testlib.basetest.</code><code class="descname">BaseTestCase</code><span class="sig-paren">(</span><em>methodName='runTest'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/basetest.html#BaseTestCase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.basetest.BaseTestCase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">unittest.case.TestCase</span></code></p>
<dl class="attribute">
<dt id="aodncore.testlib.basetest.BaseTestCase.config">
<code class="descname">config</code><a class="headerlink" href="#aodncore.testlib.basetest.BaseTestCase.config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aodncore.testlib.basetest.BaseTestCase.setUp">
<code class="descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/basetest.html#BaseTestCase.setUp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.basetest.BaseTestCase.setUp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aodncore.testlib.basetest.BaseTestCase.tearDown">
<code class="descname">tearDown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/basetest.html#BaseTestCase.tearDown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.basetest.BaseTestCase.tearDown" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aodncore.testlib.basetest.BaseTestCase.temp_dir">
<code class="descname">temp_dir</code><a class="headerlink" href="#aodncore.testlib.basetest.BaseTestCase.temp_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aodncore.testlib.basetest.BaseTestCase.temp_nc_file">
<code class="descname">temp_nc_file</code><a class="headerlink" href="#aodncore.testlib.basetest.BaseTestCase.temp_nc_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-aodncore.testlib.dummyhandler">
<span id="aodncore-testlib-dummyhandler-module"></span><h2>aodncore.testlib.dummyhandler module<a class="headerlink" href="#module-aodncore.testlib.dummyhandler" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="aodncore.testlib.dummyhandler.DummyHandler">
<em class="property">class </em><code class="descclassname">aodncore.testlib.dummyhandler.</code><code class="descname">DummyHandler</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/dummyhandler.html#DummyHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.dummyhandler.DummyHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aodncore.pipeline.html#aodncore.pipeline.handlerbase.HandlerBase" title="aodncore.pipeline.handlerbase.HandlerBase"><code class="xref py py-class docutils literal"><span class="pre">aodncore.pipeline.handlerbase.HandlerBase</span></code></a></p>
<p>This is an example handler, used for testing and also to demonstrate some of the kinds of things that each step
might perform.</p>
<p>Bear in mind that this inherits everything from the HandlerBase, but only some of the things are suitable to be
overridden in this child class.</p>
<p>Inherited instance members that will nearly always be relevant:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>self.file_collection - the main collection of files, which is a PipelineFileCollection object whose elements</dt>
<dd>are all PipelineFile instances (see handlerlib.files to see what these are)</dd>
</dl>
</li>
<li>self.logger - log things!</li>
</ul>
<p>Inherited
Things that you would typically implement here:</p>
<ul class="simple">
<li>dest_path static method to</li>
<li>preprocess</li>
<li>process</li>
<li>postprocess methods</li>
</ul>
<dl class="staticmethod">
<dt id="aodncore.testlib.dummyhandler.DummyHandler.dest_path">
<em class="property">static </em><code class="descname">dest_path</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/dummyhandler.html#DummyHandler.dest_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.dummyhandler.DummyHandler.dest_path" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is optional, but if it is defined, it will be used to determine the destination path for a given
input path. This could be based purely on the filename, or you could import the netcdf library and open the file
and work it out based on the contents, or of course any other way you want to determine it
:param filename: individual input file
:return: destination path for the input file</p>
</dd></dl>

<dl class="method">
<dt id="aodncore.testlib.dummyhandler.DummyHandler.postprocess">
<code class="descname">postprocess</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/dummyhandler.html#DummyHandler.postprocess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.dummyhandler.DummyHandler.postprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Here you can run code that needs to run <em>after</em> the publishing step but <em>before</em> the notify step</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aodncore.testlib.dummyhandler.DummyHandler.preprocess">
<code class="descname">preprocess</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/dummyhandler.html#DummyHandler.preprocess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.dummyhandler.DummyHandler.preprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Here you can run code that needs to run before the compliance checker step. This might be where you specify
which files in the “eligible_files” list are “UPLOAD_ONLY”, or not published at all</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aodncore.testlib.dummyhandler.DummyHandler.process">
<code class="descname">process</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/dummyhandler.html#DummyHandler.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.dummyhandler.DummyHandler.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Here you can run code that needs to run <em>after</em> the compliance checker step but <em>before</em> the publishing step.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-aodncore.testlib.handlertest">
<span id="aodncore-testlib-handlertest-module"></span><h2>aodncore.testlib.handlertest module<a class="headerlink" href="#module-aodncore.testlib.handlertest" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="aodncore.testlib.handlertest.HandlerTestCase">
<em class="property">class </em><code class="descclassname">aodncore.testlib.handlertest.</code><code class="descname">HandlerTestCase</code><span class="sig-paren">(</span><em>methodName='runTest'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/handlertest.html#HandlerTestCase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.handlertest.HandlerTestCase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aodncore.testlib.basetest.BaseTestCase" title="aodncore.testlib.basetest.BaseTestCase"><code class="xref py py-class docutils literal"><span class="pre">aodncore.testlib.basetest.BaseTestCase</span></code></a></p>
<dl class="method">
<dt id="aodncore.testlib.handlertest.HandlerTestCase.run_handler">
<code class="descname">run_handler</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/handlertest.html#HandlerTestCase.run_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.handlertest.HandlerTestCase.run_handler" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Instantiate and run the handler class defined in self.handler_class.</dt>
<dd>Raise an AssertionError if the handler completes with any error</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>args</strong> – args passed directly to handler instance</li>
<li><strong>kwargs</strong> – kwargs passed directly to handler instance</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the handler instance</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aodncore.testlib.handlertest.HandlerTestCase.run_handler_with_exception">
<code class="descname">run_handler_with_exception</code><span class="sig-paren">(</span><em>expected_error</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/handlertest.html#HandlerTestCase.run_handler_with_exception"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.handlertest.HandlerTestCase.run_handler_with_exception" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Instantiate and run the handler class defined in self.handler_class</dt>
<dd>Raise an AssertionError if the handler completes <em>without</em> the error attribute being the expected Exception
class</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>expected_error</strong> – expected Exception class</li>
<li><strong>args</strong> – args passed directly to handler instance</li>
<li><strong>kwargs</strong> – kwargs passed directly to handler instance</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the handler instance</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aodncore.testlib.handlertest.HandlerTestCase.setUp">
<code class="descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/handlertest.html#HandlerTestCase.setUp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.handlertest.HandlerTestCase.setUp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="aodncore.testlib.handlertest.HandlerTestCase.setUpClass">
<em class="property">classmethod </em><code class="descname">setUpClass</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/handlertest.html#HandlerTestCase.setUpClass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.handlertest.HandlerTestCase.setUpClass" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aodncore.testlib.handlertest.HandlerTestCase.test_base">
<code class="descname">test_base</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/handlertest.html#HandlerTestCase.test_base"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.handlertest.HandlerTestCase.test_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-aodncore.testlib.testutil">
<span id="aodncore-testlib-testutil-module"></span><h2>aodncore.testlib.testutil module<a class="headerlink" href="#module-aodncore.testlib.testutil" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="aodncore.testlib.testutil.NullUploadRunner">
<em class="property">class </em><code class="descclassname">aodncore.testlib.testutil.</code><code class="descname">NullUploadRunner</code><span class="sig-paren">(</span><em>prefix</em>, <em>fail=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#NullUploadRunner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.testutil.NullUploadRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">aodncore.pipeline.steps.upload.BaseUploadRunner</span></code></p>
<dl class="method">
<dt id="aodncore.testlib.testutil.NullUploadRunner.assert_call_count">
<code class="descname">assert_call_count</code><span class="sig-paren">(</span><em>count</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#NullUploadRunner.assert_call_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.testutil.NullUploadRunner.assert_call_count" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aodncore.testlib.testutil.NullUploadRunner.assert_called">
<code class="descname">assert_called</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#NullUploadRunner.assert_called"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.testutil.NullUploadRunner.assert_called" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aodncore.testlib.testutil.NullUploadRunner.assert_not_called">
<code class="descname">assert_not_called</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#NullUploadRunner.assert_not_called"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.testutil.NullUploadRunner.assert_not_called" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aodncore.testlib.testutil.NullUploadRunner.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>pipeline_files</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#NullUploadRunner.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.testutil.NullUploadRunner.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aodncore.testlib.testutil.NullUploadRunner.set_is_overwrite">
<code class="descname">set_is_overwrite</code><span class="sig-paren">(</span><em>pipeline_files</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#NullUploadRunner.set_is_overwrite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.testutil.NullUploadRunner.set_is_overwrite" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="aodncore.testlib.testutil.dest_path_testing">
<code class="descclassname">aodncore.testlib.testutil.</code><code class="descname">dest_path_testing</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#dest_path_testing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.testutil.dest_path_testing" title="Permalink to this definition">¶</a></dt>
<dd><p>Example/test function for destination path resolution</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">relative path prepended with DUMMY</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aodncore.testlib.testutil.get_nonexistent_path">
<code class="descclassname">aodncore.testlib.testutil.</code><code class="descname">get_nonexistent_path</code><span class="sig-paren">(</span><em>relative=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#get_nonexistent_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.testutil.get_nonexistent_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a path that is guaranteed not to exist</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">string containing guaranteed non-existent path</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aodncore.testlib.testutil.make_test_file">
<code class="descclassname">aodncore.testlib.testutil.</code><code class="descname">make_test_file</code><span class="sig-paren">(</span><em>filename</em>, <em>attributes=None</em>, <em>**variables</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#make_test_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.testutil.make_test_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a netcdf file with the given global and variable
attributes. Variables are created as dimensionless doubles.</p>
<p>For example this:</p>
<blockquote>
<div><dl class="docutils">
<dt>make_test_file(testfile,</dt>
<dd>{‘title’: ‘test file’, ‘site_code’: ‘NRSMAI’},
TEMP = {‘standard_name’: ‘sea_water_temperature’},
PSAL = {‘standard_name’: ‘sea_water_salinity’}</dd>
</dl>
<p>)</p>
</div></blockquote>
<p>will create (in cdl):</p>
<blockquote>
<div><p>netcdf testfile {
variables:</p>
<blockquote>
<div><dl class="docutils">
<dt>double PSAL ;</dt>
<dd>PSAL:standard_name = “sea_water_salinity” ;</dd>
<dt>double TEMP ;</dt>
<dd>TEMP:standard_name = “sea_water_temperature” ;</dd>
</dl>
</div></blockquote>
<dl class="docutils">
<dt>// global attributes:</dt>
<dd>:site_code = “NRSMAI” ;
:title = “test file” ;</dd>
</dl>
<p>}</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="aodncore.testlib.testutil.make_zip">
<code class="descclassname">aodncore.testlib.testutil.</code><code class="descname">make_zip</code><span class="sig-paren">(</span><em>temp_dir</em>, <em>file_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#make_zip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.testutil.make_zip" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a zip file in tmp_dir containing the files listed in file_list.
Return the full path to the zip file.</p>
</dd></dl>

<dl class="function">
<dt id="aodncore.testlib.testutil.get_test_config">
<code class="descclassname">aodncore.testlib.testutil.</code><code class="descname">get_test_config</code><span class="sig-paren">(</span><em>temp_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#get_test_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.testutil.get_test_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="aodncore.testlib.testutil.patch_test_config">
<code class="descclassname">aodncore.testlib.testutil.</code><code class="descname">patch_test_config</code><span class="sig-paren">(</span><em>config</em>, <em>rel_path</em>, <em>temp_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#patch_test_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.testutil.patch_test_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Update config object with dynamic runtime values (e.g. temp directories)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>config</strong> – config dictionary to update</li>
<li><strong>rel_path</strong> – </li>
<li><strong>temp_dir</strong> – temporary directory used to update values</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">ConfigParser object patched with runtime test values</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-aodncore.testlib">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-aodncore.testlib" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="aodncore.testlib.BaseTestCase">
<em class="property">class </em><code class="descclassname">aodncore.testlib.</code><code class="descname">BaseTestCase</code><span class="sig-paren">(</span><em>methodName='runTest'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/basetest.html#BaseTestCase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.BaseTestCase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">unittest.case.TestCase</span></code></p>
<dl class="attribute">
<dt id="aodncore.testlib.BaseTestCase.config">
<code class="descname">config</code><a class="headerlink" href="#aodncore.testlib.BaseTestCase.config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aodncore.testlib.BaseTestCase.setUp">
<code class="descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/basetest.html#BaseTestCase.setUp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.BaseTestCase.setUp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aodncore.testlib.BaseTestCase.tearDown">
<code class="descname">tearDown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/basetest.html#BaseTestCase.tearDown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.BaseTestCase.tearDown" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aodncore.testlib.BaseTestCase.temp_dir">
<code class="descname">temp_dir</code><a class="headerlink" href="#aodncore.testlib.BaseTestCase.temp_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aodncore.testlib.BaseTestCase.temp_nc_file">
<code class="descname">temp_nc_file</code><a class="headerlink" href="#aodncore.testlib.BaseTestCase.temp_nc_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="aodncore.testlib.DummyHandler">
<em class="property">class </em><code class="descclassname">aodncore.testlib.</code><code class="descname">DummyHandler</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/dummyhandler.html#DummyHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.DummyHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aodncore.pipeline.html#aodncore.pipeline.handlerbase.HandlerBase" title="aodncore.pipeline.handlerbase.HandlerBase"><code class="xref py py-class docutils literal"><span class="pre">aodncore.pipeline.handlerbase.HandlerBase</span></code></a></p>
<p>This is an example handler, used for testing and also to demonstrate some of the kinds of things that each step
might perform.</p>
<p>Bear in mind that this inherits everything from the HandlerBase, but only some of the things are suitable to be
overridden in this child class.</p>
<p>Inherited instance members that will nearly always be relevant:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>self.file_collection - the main collection of files, which is a PipelineFileCollection object whose elements</dt>
<dd>are all PipelineFile instances (see handlerlib.files to see what these are)</dd>
</dl>
</li>
<li>self.logger - log things!</li>
</ul>
<p>Inherited
Things that you would typically implement here:</p>
<ul class="simple">
<li>dest_path static method to</li>
<li>preprocess</li>
<li>process</li>
<li>postprocess methods</li>
</ul>
<dl class="staticmethod">
<dt id="aodncore.testlib.DummyHandler.dest_path">
<em class="property">static </em><code class="descname">dest_path</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/dummyhandler.html#DummyHandler.dest_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.DummyHandler.dest_path" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is optional, but if it is defined, it will be used to determine the destination path for a given
input path. This could be based purely on the filename, or you could import the netcdf library and open the file
and work it out based on the contents, or of course any other way you want to determine it
:param filename: individual input file
:return: destination path for the input file</p>
</dd></dl>

<dl class="method">
<dt id="aodncore.testlib.DummyHandler.postprocess">
<code class="descname">postprocess</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/dummyhandler.html#DummyHandler.postprocess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.DummyHandler.postprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Here you can run code that needs to run <em>after</em> the publishing step but <em>before</em> the notify step</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aodncore.testlib.DummyHandler.preprocess">
<code class="descname">preprocess</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/dummyhandler.html#DummyHandler.preprocess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.DummyHandler.preprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Here you can run code that needs to run before the compliance checker step. This might be where you specify
which files in the “eligible_files” list are “UPLOAD_ONLY”, or not published at all</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aodncore.testlib.DummyHandler.process">
<code class="descname">process</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/dummyhandler.html#DummyHandler.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.DummyHandler.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Here you can run code that needs to run <em>after</em> the compliance checker step but <em>before</em> the publishing step.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aodncore.testlib.HandlerTestCase">
<em class="property">class </em><code class="descclassname">aodncore.testlib.</code><code class="descname">HandlerTestCase</code><span class="sig-paren">(</span><em>methodName='runTest'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/handlertest.html#HandlerTestCase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.HandlerTestCase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aodncore.testlib.basetest.BaseTestCase" title="aodncore.testlib.basetest.BaseTestCase"><code class="xref py py-class docutils literal"><span class="pre">aodncore.testlib.basetest.BaseTestCase</span></code></a></p>
<dl class="method">
<dt id="aodncore.testlib.HandlerTestCase.run_handler">
<code class="descname">run_handler</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/handlertest.html#HandlerTestCase.run_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.HandlerTestCase.run_handler" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Instantiate and run the handler class defined in self.handler_class.</dt>
<dd>Raise an AssertionError if the handler completes with any error</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>args</strong> – args passed directly to handler instance</li>
<li><strong>kwargs</strong> – kwargs passed directly to handler instance</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the handler instance</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aodncore.testlib.HandlerTestCase.run_handler_with_exception">
<code class="descname">run_handler_with_exception</code><span class="sig-paren">(</span><em>expected_error</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/handlertest.html#HandlerTestCase.run_handler_with_exception"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.HandlerTestCase.run_handler_with_exception" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Instantiate and run the handler class defined in self.handler_class</dt>
<dd>Raise an AssertionError if the handler completes <em>without</em> the error attribute being the expected Exception
class</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>expected_error</strong> – expected Exception class</li>
<li><strong>args</strong> – args passed directly to handler instance</li>
<li><strong>kwargs</strong> – kwargs passed directly to handler instance</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the handler instance</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aodncore.testlib.HandlerTestCase.setUp">
<code class="descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/handlertest.html#HandlerTestCase.setUp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.HandlerTestCase.setUp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="aodncore.testlib.HandlerTestCase.setUpClass">
<em class="property">classmethod </em><code class="descname">setUpClass</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/handlertest.html#HandlerTestCase.setUpClass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.HandlerTestCase.setUpClass" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aodncore.testlib.HandlerTestCase.test_base">
<code class="descname">test_base</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/handlertest.html#HandlerTestCase.test_base"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.HandlerTestCase.test_base" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="aodncore.testlib.NullUploadRunner">
<em class="property">class </em><code class="descclassname">aodncore.testlib.</code><code class="descname">NullUploadRunner</code><span class="sig-paren">(</span><em>prefix</em>, <em>fail=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#NullUploadRunner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.NullUploadRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">aodncore.pipeline.steps.upload.BaseUploadRunner</span></code></p>
<dl class="method">
<dt id="aodncore.testlib.NullUploadRunner.assert_call_count">
<code class="descname">assert_call_count</code><span class="sig-paren">(</span><em>count</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#NullUploadRunner.assert_call_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.NullUploadRunner.assert_call_count" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aodncore.testlib.NullUploadRunner.assert_called">
<code class="descname">assert_called</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#NullUploadRunner.assert_called"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.NullUploadRunner.assert_called" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aodncore.testlib.NullUploadRunner.assert_not_called">
<code class="descname">assert_not_called</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#NullUploadRunner.assert_not_called"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.NullUploadRunner.assert_not_called" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aodncore.testlib.NullUploadRunner.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>pipeline_files</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#NullUploadRunner.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.NullUploadRunner.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aodncore.testlib.NullUploadRunner.set_is_overwrite">
<code class="descname">set_is_overwrite</code><span class="sig-paren">(</span><em>pipeline_files</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#NullUploadRunner.set_is_overwrite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.NullUploadRunner.set_is_overwrite" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="aodncore.testlib.dest_path_testing">
<code class="descclassname">aodncore.testlib.</code><code class="descname">dest_path_testing</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#dest_path_testing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.dest_path_testing" title="Permalink to this definition">¶</a></dt>
<dd><p>Example/test function for destination path resolution</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">relative path prepended with DUMMY</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aodncore.testlib.get_nonexistent_path">
<code class="descclassname">aodncore.testlib.</code><code class="descname">get_nonexistent_path</code><span class="sig-paren">(</span><em>relative=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#get_nonexistent_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.get_nonexistent_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a path that is guaranteed not to exist</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">string containing guaranteed non-existent path</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aodncore.testlib.get_test_config">
<code class="descclassname">aodncore.testlib.</code><code class="descname">get_test_config</code><span class="sig-paren">(</span><em>temp_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#get_test_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.get_test_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="aodncore.testlib.make_test_file">
<code class="descclassname">aodncore.testlib.</code><code class="descname">make_test_file</code><span class="sig-paren">(</span><em>filename</em>, <em>attributes=None</em>, <em>**variables</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#make_test_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.make_test_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a netcdf file with the given global and variable
attributes. Variables are created as dimensionless doubles.</p>
<p>For example this:</p>
<blockquote>
<div><dl class="docutils">
<dt>make_test_file(testfile,</dt>
<dd>{‘title’: ‘test file’, ‘site_code’: ‘NRSMAI’},
TEMP = {‘standard_name’: ‘sea_water_temperature’},
PSAL = {‘standard_name’: ‘sea_water_salinity’}</dd>
</dl>
<p>)</p>
</div></blockquote>
<p>will create (in cdl):</p>
<blockquote>
<div><p>netcdf testfile {
variables:</p>
<blockquote>
<div><dl class="docutils">
<dt>double PSAL ;</dt>
<dd>PSAL:standard_name = “sea_water_salinity” ;</dd>
<dt>double TEMP ;</dt>
<dd>TEMP:standard_name = “sea_water_temperature” ;</dd>
</dl>
</div></blockquote>
<dl class="docutils">
<dt>// global attributes:</dt>
<dd>:site_code = “NRSMAI” ;
:title = “test file” ;</dd>
</dl>
<p>}</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="aodncore.testlib.make_zip">
<code class="descclassname">aodncore.testlib.</code><code class="descname">make_zip</code><span class="sig-paren">(</span><em>temp_dir</em>, <em>file_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aodncore/testlib/testutil.html#make_zip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aodncore.testlib.make_zip" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a zip file in tmp_dir containing the files listed in file_list.
Return the full path to the zip file.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, AODN.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.7</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/aodncore.testlib.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>